{"paragraphs":[{"text":"%spark.dep\nz.load(\"/opt/zeppelin/confluent-spark-avro-assembly-1.2.jar\")","user":"anonymous","dateUpdated":"2019-03-08T07:57:45+0000","config":{"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/scala","fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"ERROR","msg":[{"type":"TEXT","data":"Must be used before SparkInterpreter (%spark) initialized\nHint: put this paragraph before any Spark code and restart Zeppelin/Interpreter"}]},"apps":[],"jobName":"paragraph_1551998863295_1664734096","id":"20190307-211204_188724794","dateCreated":"2019-03-07T22:47:43+0000","dateStarted":"2019-03-08T07:57:45+0000","dateFinished":"2019-03-08T07:57:45+0000","status":"ERROR","progressUpdateIntervalMs":500,"focus":true,"$$hashKey":"object:17286"},{"text":"val dfRaw = spark.read.\n\tformat(\"kafka\").\n\toption(\"kafka.bootstrap.servers\", \"broker-1:9092,broker-2:9093\").\n\toption(\"subscribe\", \"person-v1\").\n\tload()\n","user":"anonymous","dateUpdated":"2019-03-08T07:45:48+0000","config":{"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/scala","fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"dfRaw: org.apache.spark.sql.DataFrame = [key: binary, value: binary ... 5 more fields]\n"}]},"apps":[],"jobName":"paragraph_1551998863312_1932107578","id":"20190307-204129_1091066595","dateCreated":"2019-03-07T22:47:43+0000","dateStarted":"2019-03-08T07:45:48+0000","dateFinished":"2019-03-08T07:45:49+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:17287"},{"text":"val utils = new com.databricks.spark.avro.ConfluentSparkAvroUtils(\"http://schema-registry:8081\")\n","user":"anonymous","dateUpdated":"2019-03-08T07:44:13+0000","config":{"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/scala","fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"utils: com.databricks.spark.avro.ConfluentSparkAvroUtils = com.databricks.spark.avro.ConfluentSparkAvroUtils@10fc190c\n"}]},"apps":[],"jobName":"paragraph_1551998863313_549944636","id":"20190307-204213_2009616087","dateCreated":"2019-03-07T22:47:43+0000","dateStarted":"2019-03-08T07:44:13+0000","dateFinished":"2019-03-08T07:44:13+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:17288"},{"text":"val keyDeserializer = utils.deserializerForSubject(\"person-v1-key\")\nval valueDeserializer = utils.deserializerForSubject(\"person-v1-value\")\n","user":"anonymous","dateUpdated":"2019-03-08T07:44:30+0000","config":{"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/scala","fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"keyDeserializer: org.apache.spark.sql.expressions.UserDefinedFunction = UserDefinedFunction(<function1>,StructType(StructField(id,StringType,false)),None)\nvalueDeserializer: org.apache.spark.sql.expressions.UserDefinedFunction = UserDefinedFunction(<function1>,StructType(StructField(id,StringType,false), StructField(firstName,StringType,false), StructField(lastName,StringType,false)),None)\n"}]},"apps":[],"jobName":"paragraph_1551998863313_1333840879","id":"20190307-204229_1641578148","dateCreated":"2019-03-07T22:47:43+0000","dateStarted":"2019-03-08T07:44:30+0000","dateFinished":"2019-03-08T07:44:31+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:17289"},{"text":"val dfSerialized = dfRaw.select(\n    keyDeserializer(col(\"key\").alias(\"key\")),\n    valueDeserializer(col(\"value\").alias(\"value\"))\n)\n","user":"anonymous","dateUpdated":"2019-03-08T07:46:08+0000","config":{"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/scala","fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"dfSerialized: org.apache.spark.sql.DataFrame = [UDF(key AS key#86): struct<id: string>, UDF(value AS value#87): struct<id: string, firstName: string ... 1 more field>]\n"}]},"apps":[],"jobName":"paragraph_1551998863314_1699846592","id":"20190307-211438_752425030","dateCreated":"2019-03-07T22:47:43+0000","dateStarted":"2019-03-08T07:46:08+0000","dateFinished":"2019-03-08T07:46:08+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:17290"},{"text":"dfSerialized.show(1)","user":"anonymous","dateUpdated":"2019-03-08T07:46:32+0000","config":{"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/scala","fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"+------------------+----------------------+\n|UDF(key AS key#86)|UDF(value AS value#87)|\n+------------------+----------------------+\n|              [10]|   [10, Peter, Muster]|\n+------------------+----------------------+\n\n"}]},"runtimeInfos":{"jobUrl":{"propertyName":"jobUrl","label":"SPARK JOB","tooltip":"View in Spark web UI","group":"spark","values":["http://2f3a35134be1:4040/jobs/job?id=9","http://2f3a35134be1:4040/jobs/job?id=10","http://2f3a35134be1:4040/jobs/job?id=11"],"interpreterSettingId":"spark"}},"apps":[],"jobName":"paragraph_1551998863315_-609667787","id":"20190307-211450_300050858","dateCreated":"2019-03-07T22:47:43+0000","dateStarted":"2019-03-08T07:46:32+0000","dateFinished":"2019-03-08T07:46:34+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:17291"},{"text":"dfSerialized.printSchema()","user":"anonymous","dateUpdated":"2019-03-08T07:46:41+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"editorMode":"ace/mode/scala"},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"root\n |-- UDF(key AS key#86): struct (nullable = true)\n |    |-- id: string (nullable = false)\n |-- UDF(value AS value#87): struct (nullable = true)\n |    |-- id: string (nullable = false)\n |    |-- firstName: string (nullable = false)\n |    |-- lastName: string (nullable = false)\n\n"}]},"apps":[],"jobName":"paragraph_1551999576229_-1805577962","id":"20190307-225936_1067023694","dateCreated":"2019-03-07T22:59:36+0000","dateStarted":"2019-03-08T07:46:41+0000","dateFinished":"2019-03-08T07:46:42+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:17292"},{"user":"anonymous","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"editorMode":"ace/mode/scala"},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1552031201865_-1473324155","id":"20190308-074641_113744915","dateCreated":"2019-03-08T07:46:41+0000","status":"READY","progressUpdateIntervalMs":500,"$$hashKey":"object:17293"}],"name":"Consume Kafka Avro from Spark","id":"2E763NNM8","noteParams":{},"noteForms":{},"angularObjects":{"spark:shared_process":[]},"config":{"isZeppelinNotebookCronEnable":false,"looknfeel":"default","personalizedMode":"false"},"info":{}}