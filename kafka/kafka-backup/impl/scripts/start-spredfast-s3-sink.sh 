#!/bin/bash

echo "creating Spreadfast S3 Sink Connector"

curl -X "POST" "$DOCKER_HOST_IP:8083/connectors" \
     -H "Content-Type: application/json" \
     --data '{
  "name": "s3-spreadfast-sink",
  "config": {
      "connector.class": "com.spredfast.kafka.connect.s3.sink.S3SinkConnector",
      "format.include.keys": "true",
      "topics": "truck_position",
      "tasks.max": "1",
      "format": "binary",
      "s3.bucket": "gschmutz-kafka-spredfast-1",
      "value.converter": "com.spredfast.kafka.connect.s3.AlreadyBytesConverter",
      "key.converter": "com.spredfast.kafka.connect.s3.AlreadyBytesConverter",
      "local.buffer.dir": "/tmp"
  }
}'